'use strict'
const assert = require('assert')
const generators = require('../generators/list.json')

describe('generators', function () {
  it('main .json', function () {
    assert.ok(generators.length, 'generators.json is empty')

    generators.forEach(function (filename) {
      try {
        const genPath = `../generators/${filename}/${filename}.json`
        require(genPath)
      } catch (e) {
        assert.ifError(e)
      }
    })
  })

  it('name property', function () {
    generators.forEach(function (filenames) {
      const genPath = `../generators/${filenames}/${filenames}.json`
      const generator = require(genPath)
      const actual = typeof generator.name
      const expected = 'string'

      assert.equal(actual, expected, `${filenames}[name] should be string`)
    })
  })

  it('message property', function () {
    generators.forEach(function (filenames) {
      const genPath = `../generators/${filenames}/${filenames}.json`
      const generator = require(genPath)
      const actual = typeof generator.message
      const expected = 'string'

      assert.equal(actual, expected, `${filenames}[message] should be string`)
    })
  })

  it('package property', function () {
    generators.forEach(function (filenames) {
      const genPath = `../generators/${filenames}/${filenames}.json`
      const generator = require(genPath)
      const actual = typeof generator.package.main
      const expected = 'string'

      assert.equal(actual, expected, `${filenames}[package] should be an object`)
    })
  })

// Arrays values
  it('dirs property', function () {
    generators.forEach(function (filenames) {
      const genPath = `../generators/${filenames}/${filenames}.json`
      const generator = require(genPath)
      const actual = Array.isArray(generator.dirs)
      const expected = true

      assert.equal(actual, expected, `${filenames}[dirs] should be an Array`)
    })
  })

  it('files property', function () {
    generators.forEach(function (filenames) {
      const genPath = `../generators/${filenames}/${filenames}.json`
      const generator = require(genPath)
      const actual = Array.isArray(generator.files)
      const expected = true

      assert.equal(actual, expected, `${filenames}[files] should be an Array`)
    })
  })

  it('run property', function () {
    generators.forEach(function (filenames) {
      const genPath = `../generators/${filenames}/${filenames}.json`
      const generator = require(genPath)
      const actual = Array.isArray(generator.run)
      const expected = true

      assert.equal(actual, expected, `${filenames}[run] should be an Array`)
    })
  })
})
